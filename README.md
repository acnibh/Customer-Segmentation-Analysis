# Customer-Segmentation-Analysis
Searching for potential customers fof the Personal Gift Platform -  [Beloved &amp; Beyond (B&amp;B)](https://belovedbeyond.com/vi/) to reach out to and serve, proposing to enhance the demand for gifts among this customer group on B&amp;B's e-commerce platform. This project and the data used were a part of the [Training & Business Case AIESEC VIET NAM](https://www.facebook.com/photo/?fbid=710078144489790&set=a.543651901132416&paipv=0&eav=AfZ8oqGRIjTd1CmWCswy8VTLxmjdeK7uK5CQfu-8xBD5yHl1sidE-nL6EbfQ68IJB1Q&_rdr).
### Tools
- Excel - Data Cleaning
- SQL Server - Collect Data
- PowerBI - visualization and creating reports
- [Download here](https://drive.google.com/file/d/1cZTx5XObqkvgeWoelYS0qw9F5Fjl_gqS/view?usp=sharing)
## Background
Beloved & Beyond (B&B) is an e-commerce platform specializing in flowers and gifts, connecting customers with local stores. B&B offers a variety of products for different occasions. To ensure stable profitability and growth, B&B needs to maintain customer loyalty by providing goods and services at their best.
## Business Questions
- Who are the potential customer groups that the company should reach out to serve?
- How to enhance the demand for gifts from this customer group on the B&B e-commerce platform?
## Data Analysis
### Customer Segmentation
![image](https://github.com/acnibh/Customer-Segmentation-Analysis/assets/146699917/fce1e306-d941-41b5-af94-1ac859e722b0)
```SQL
-- Collect data to identify customer segmentation

WITH joined_table AS (
     SELECT customer_id
       , CONVERT(Date, [create_info_created]) AS trans_date
	   , [ summary_grand_total ] 	  
     FROM bills
)
, rfm_table AS (
     SELECT  DISTINCT customer_id
       , DATEDIFF(Day, CONVERT(Date, Max(trans_date)), '2023-10-23') AS Recency
       , COUNT( DISTINCT trans_date) AS Frequency
       , SUM ([ summary_grand_total ]) AS Monetary
     FROM joined_table
     GROUP BY customer_id
)
, rfm_rank AS (
     SELECT *
       , PERCENT_RANK () OVER (ORDER BY Recency ASC) r_rank
       , PERCENT_RANK () OVER (ORDER BY Frequency DESC) f_rank
       , PERCENT_RANK () OVER (ORDER BY Monetary DESC) m_rank
FROM rfm_table
)
, tier_table AS (
     SELECT *
       , CASE WHEN r_rank > 0.75 THEN 4
              WHEN r_rank > 0.5 THEN 3
	          WHEN r_rank > 0.25 THEN 2
	          ELSE 1 END r_tier
	   , CASE WHEN f_rank > 0.10 THEN 4
			  WHEN f_rank > 0.05 THEN 3
			  WHEN f_rank > 0.01 THEN 2
			  ELSE 1 END f_tier
       , CASE WHEN m_rank > 0.75 THEN 4
              WHEN m_rank > 0.5 THEN 3
	          WHEN m_rank > 0.25 THEN 2
	          ELSE 1 END m_tier
     FROM rfm_rank
)
, table_score AS (
      SELECT *
        , CONCAT (r_tier, f_tier, m_tier) AS rfm_score
      FROM tier_table
) 
	  SELECT *
        , CASE
            WHEN rfm_score = 111 THEN 'Best Customers' -- KH hàng tốt nhất
            WHEN rfm_score LIKE '[3-4][3-4][1-4]' THEN 'Lost Bad Customer' -- KH rời bỏ mà còn tệ
			WHEN rfm_score LIKE '[3-4]2[1-4]' THEN 'Lost Customers' -- KH rời bỏ nhưng nhiều value (F = 3,4,5 )
			WHEN rfm_score LIKE '21[1-4]' THEN 'Almost Lost' --Sắp mất KH này
			WHEN rfm_score LIKE '11[2-4]' THEN 'Loyal Customers' -- Khách hàng trung thành
			WHEN rfm_score LIKE '[1-2][1-3]1' THEN 'Big Spenders' -- KH chi nhiều tiền
			WHEN rfm_score LIKE '[1-2]4[1-4]' THEN 'New Customers' -- KH mới nên Frequency chưa nhiều
			WHEN rfm_score LIKE '[3-4]1[1-4]' THEN 'Hibernating' -- KH ngủ đông (Trước đó từng rất tốt)
			WHEN rfm_score LIKE '[1-2][2-3][2-4]' THEN 'Potential Loyalists' -- KH tiềm năng
			ELSE 'unknown' END AS segment
FROM table_score


```
```SQL

--- Repeat Purchase Rate (RPR)
SELECT
    customer_id,
    COUNT(*) AS repeat_customer_count
FROM
    (
        SELECT
            customer_id,
            ROW_NUMBER() OVER (PARTITION BY customer_id ORDER BY [create_info_created] DESC) AS row_num
        FROM
            bills
    ) AS ranked_transactions
WHERE
    row_num > 1
GROUP BY
    customer_id
```




First, let's analyze the Repeat Purchase Rate (RPR) with 899 returning customers out of a total of 3875 customers, resulting in a rate of 23.18%, this is a relatively low percentage. Over the years, the number of returning customers has only constituted a small portion of the total customer base. However, returning customers contribute to over 63% of the revenue per order and account for more than 55% of the total commission. The revenue generated by this customer group is quite significant. Segmenting customers using the RFM (Recency - Frequency - Monetary) method and Percentiles reveals that the Lost Bad Customer and New Customer groups constitute a large portion compared to other groups. Naturally, their return rates are relatively low, but their revenue per order accounts for nearly 50%. Particularly, the Big Spenders and Potential Loyalists customer groups have a considerably high revenue share, and their return rates are almost 100%. we will analyze the needs of these groups to attract returning customers.


### Consumer Analysis
![image](https://github.com/acnibh/Customer-Segmentation-Analysis/assets/146699917/2197f5ab-a7bf-4c40-a465-30b5156b5290)




Analyzing the top 3 customer groups with the highest frequency of less than 6 returns reveals that orders will increase significantly before the holidays on 14/2, 8/3, and 24/2, especially with flower items and boyfriends giving gifts to their girlfriends. Additionally, a spike occurs around birthdays. Most customers with a high frequency of returns tend to give gifts to partners and colleagues.





